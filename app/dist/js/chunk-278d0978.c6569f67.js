(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-278d0978"],{"33f4":function(t,e,o){},"89e2":function(t,e,o){"use strict";o("57e7"),o("d25f"),o("456d"),o("28a5"),o("ac6a"),o("f3e2");var r=o("95d5");e["a"]={data:function(){return{countryKeyCode:"",country:""}},watch:{countryObj:{handler:function(){var t=this.defaultCountryCode;t&&""===this.countryKeyCode&&(this.countryKeyCode=t),!this.defaultCountryCodeReal&&!this.country&&t&&this.countryMap&&this.countryMap[t]&&(this.country=this.countryMap[t].code),this.defaultCountryCodeReal&&""===this.country&&(this.country=this.defaultCountryCodeReal)}},defaultCountryCodeReal:{handler:function(t){t&&""===this.country&&(this.country=t)},immediate:!0},defaultCountryCode:{handler:function(t){t&&""===this.countryKeyCode&&(this.defaultCountryCodeReal?this.countryKeyCode=this.countryListKeyObj[this.defaultCountryCodeReal].keyCode:this.countryKeyCode=t),!this.defaultCountryCodeReal&&!this.country&&t&&this.countryMap&&this.countryMap[t]&&(this.country=this.countryMap[t].code)},immediate:!0}},computed:{countryListKeyObj:function(){var t={};return this.countryObj.list.forEach((function(e){t[e.code]={code:e.code,keyCode:e.keyCode,value:e.value.split(" ")[0]}})),t},countryList:function(){return this.countryObj.list},registerCountryList:function(){var t=this.filterCountryList(this.$t("phoneCode"));return Object(r["o"])(t).list},countryListMoy:function(){var t=[];return this.countryObj.list.forEach((function(e){t.push({code:e.code,keyCode:e.keyCode,value:e.value.split(" +")[0]})})),t},countryMap:function(){return this.countryObj.countryMap},countryRealMap:function(){return this.countryObj.countryRealMap},countryObj:function(){return this.$store.state.baseData.countryObj},defaultCountryCode:function(){return this.$store.state.baseData.defaultCountryCode},defaultCountryCodeReal:function(){return this.$store.state.baseData.defaultCountryCodeReal},limitCountryList:function(){return this.$store.state.baseData.limitCountryList}},methods:{countryChange:function(t){this.country=t.code,this.countryKeyCode=t.keyCode},filterCountryList:function(t){var e=t,o=this.limitCountryList;return o.length>0&&(o=o.join("").split("+"),Object.keys(e).forEach((function(t){e[t]=e[t].filter((function(t){var e=t.split("+");return-1===o.indexOf(e[2])}))}))),e}}}},9927:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bind-phone a-5-bg"},[o("p",{staticClass:"user-management-child-header b-1-cl a-3-bd"},[t._v(t._s(t.$t("personal.bindPhone.title")))]),o("div",{staticClass:"user-management-center a-5-bg"},[o("div",{staticClass:"center-input"},[o("c-select",{attrs:{value:t.country,promptText:t.promptText,name:"country",errorHave:!0,errorFlag:t.countryErrorFlag,errorText:t.errorText,options:t.countryList,filterable:!0},on:{onChanges:t.countryChange}}),o("c-inputLine",{attrs:{name:"phone",maxLength:"20",inputType:"text",promptText:t.promptText1,errorHave:!0,errorText:t.errorText1,errorFlag:t.checkErrorFlag1,marginTop:"0px",value:t.checkValue1},on:{onchanges:t.inputChanges}}),o("c-inputLine",{attrs:{name:"phoneCode",maxLength:"6",inputType:"text",promptText:t.promptText2,errorHave:!0,errorText:t.errorText2,errorFlag:t.checkErrorFlag2,marginTop:"0px",value:t.checkValue2},on:{onchanges:t.inputChanges}},[o("c-getCode",{attrs:{name:"phone",autoStart:!1,buttonName:"loginGetcodeBtn"},on:{click:function(e){return t.getCodeClick("phone")}}})],1),t.googleCode?o("c-inputLine",{attrs:{maxLength:"6",name:"googleCode",inputType:"text",promptText:t.promptText3,errorHave:!0,errorText:t.errorText3,errorFlag:t.checkErrorFlag3,marginTop:"0px",value:t.checkValue3},on:{onchanges:t.inputChanges}}):t._e(),o("c-button",{attrs:{type:"solid",big:!0,loading:t.loading,className:"",paddingW:"0px",disabled:t.disabled,marginTop:"18px",height:"40px",width:"100%"},on:{click:t.btnLink}},[t._v(t._s(this.$t("personal.tool.bind")))])],1)]),o("c-dialog",{attrs:{showFlag:t.dialogFlag,titleText:t.$t("registerOptions.title"),haveOption:!0,confirmText:t.$t("registerOptions.conf"),closeText:t.$t("registerOptions.close")},on:{close:t.dialogClose,confirm:t.dialogConfirm}},[o("div",{staticClass:"bindPhone-warn"},[t._v("\n      "+t._s(t.$t("registerOptions.text")))])])],1)},n=[],i=(o("c5f6"),o("95d5")),s=o("89e2"),a={name:"bindPhone",mixins:[s["a"]],watch:{sendSmsCode:function(t){null!==t&&("success"===t.text?(this.$bus.$emit("tip",{text:t.msg,type:"success"}),this.$store.dispatch("resetType")):(this.$bus.$emit("tip",{text:t.msg,type:"error"}),this.$store.dispatch("resetType")))},nowUserRegType:{immediate:!0,handler:function(){this.dialogSet()}},userInfo:{immediate:!0,handler:function(t){t&&(this.googleCode=!!Number(t.googleStatus),this.googleReady=!0,this.dialogSet())}},mobileBindSave:function(t){null!==t&&(this.loading=!1,"success"===t.text?(this.$bus.$emit("tip",{text:t.msg,type:"success"}),this.$store.dispatch("resetType"),this.$router.push("/personal/userManagement")):(this.$bus.$emit("tip",{text:t.msg,type:"error"}),this.$store.dispatch("resetType"),"10009"!==t.code&&this.$bus.$emit("getCode-clear","phone")))}},computed:{userInfo:function(){return this.$store.state.baseData.userInfo},sendSmsCode:function(){return this.$store.state.personal.sendSmsCode},mobileBindSave:function(){return this.$store.state.personal.mobileBindSave},userRegType:function(){var t=this.$store.state.baseData.publicInfo,e="{}";return t&&t.switch&&t.switch.user_reg_type&&(e=t.switch.user_reg_type),JSON.parse(e)},nowUserRegType:function(){var t=Object(i["n"])("lan"),e=[1,2];return this.userRegType[t]&&(e=this.userRegType[t]),e}},data:function(){return{promptText:this.$t("personal.label.promptText"),errorText:this.$t("personal.label.errorText"),loading:!1,checkValue1:"",checkValue2:"",checkValue3:"",promptText1:this.$t("personal.label.phone"),promptText2:this.$t("personal.label.smsCodeText"),promptText3:this.$t("personal.label.googleCodeText"),errorText1:this.$t("personal.prompt.errorPhone"),errorText2:this.$t("personal.prompt.errorCode"),errorText3:this.$t("personal.prompt.errorCode"),checkErrorFlag1:!1,checkErrorFlag2:!1,checkErrorFlag3:!1,disabled:!0,googleCode:!1,countryErrorFlag:!1,dialogFlag:!1,googleReady:!1}},methods:{dialogSet:function(){2===this.nowUserRegType[0]&&1===this.nowUserRegType.length&&this.googleReady&&!this.googleCode&&(this.dialogFlag=!0)},dialogClose:function(){this.dialogFlag=!1},dialogConfirm:function(){this.$router.push("/personal/bindGoogle")},init:function(){this.userInfo&&(this.googleCode=!!Number(this.userInfo.googleStatus))},phoneFlag:function(t){return this.$store.state.regExp.phone.test(t)},codeFlag:function(t){return this.$store.state.regExp.verification.test(t)},getCodeClick:function(){if(this.checkValue1&&!this.checkErrorFlag1){this.$bus.$emit("getCode-start","phone");var t={countryCode:this.countryKeyCode,mobile:this.checkValue1,operationType:2};this.$store.dispatch("sendSmsCode",t)}else this.checkErrorFlag1=!0,this.errorText1=this.$t("personal.prompt.errorPhoneText")},inputChanges:function(t,e){switch(e){case"phone":this.checkValue1=t,this.phoneFlag(t)?this.checkErrorFlag1=!1:(this.checkErrorFlag1=!0,this.errorText1=this.$t("personal.prompt.errorPhone"));break;case"phoneCode":this.checkValue2=t,this.codeFlag(t)?this.checkErrorFlag2=!1:this.checkErrorFlag2=!0;break;default:this.checkValue3=t,this.codeFlag(t)?this.checkErrorFlag3=!1:this.checkErrorFlag3=!0}!this.checkValue1||!this.checkValue2||this.checkErrorFlag1||this.checkErrorFlag2||this.checkErrorFlag3?this.disabled=!0:this.googleCode?this.checkValue3&&(this.disabled=!this.checkValue3):this.disabled=!1},btnLink:function(){this.loading=!0;var t={countryCode:this.countryKeyCode,mobileNumber:this.checkValue1,smsAuthCode:this.checkValue2,googleCode:this.checkValue3};this.$store.dispatch("mobileBindSave",t)}}},c=(o("33f4"),{mixins:[a],mounted:function(){this.init()}}),u=c,h=o("2877"),l=Object(h["a"])(u,r,n,!1,null,null,null);e["default"]=l.exports}}]);