(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d9be616"],{"7fce":function(t,e,s){},"8d48":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notice-info clearfix"},[s("div",{staticClass:"main-content"},[s("div",{staticClass:"menu"},[s("h3",{staticClass:"menu-tit f-1-cl"},[t._v(t._s(t.$t("message.mesage")))]),s("ul",{staticClass:"f-2-cl"},t._l(t.sideList,(function(e,a){return s("li",{key:a,staticClass:"menu-item",class:{"f-1-cl c-4-bg":t.messageType===e.tid},on:{click:function(s){return t.switchType(e.tid,e.title)}}},[t._v("\n            "+t._s(e.title)+"\n        ")])})),0)]),s("div",{staticClass:"content-box"},[s("div",{staticClass:"content-list c-4-bg"},[s("h1",{staticClass:"content-title f-1-cl c-5-bd"},[t._v(t._s(t.title))]),t.notieContent.length?s("ul",{staticClass:"message-list"},[s("li",{staticClass:"all-select c-5-bd"},[s("i",{staticClass:"status"},[s("c-checkBox",{attrs:{value:t.dataListId.length===t.selectArr.length},on:{click:function(e){return t.checkoutSelect("all")}}})],1),s("div",{staticClass:"message-text"},[s("div",{staticClass:"main-text f-2-cl"},[t._v("\n                "+t._s(t.$t("message.selectAll"))+"\n              ")])]),s("c-button",{attrs:{type:"text",className:"delete-btn",marginTop:"0"},on:{click:function(e){return t.deleteMsg(t.selectArr,"all")}}},[t._v("\n              "+t._s(t.$t("message.delete"))+"\n            ")]),s("c-button",{attrs:{type:"text",className:"delete-btn",marginTop:"0"},on:{click:function(e){return t.onChangeRead(0,"all")}}},[t._v("\n              "+t._s(t.$t("message.readAll"))+"\n            ")])],1),t._l(t.notieContent,(function(e,a){return s("li",{key:a,staticClass:"c-5-bd"},[s("i",{staticClass:"status"},[s("c-checkBox",{attrs:{value:-1!==t.selectArr.indexOf(e.id)},on:{click:function(s){return t.checkoutSelect(e.id)}}})],1),s("div",{staticClass:"message-text"},[s("div",{class:1===e.status?"f-1-cl":"f-2-cl",domProps:{innerHTML:t._s(e.messageContent)},on:{click:function(s){return t.onChangeRead(e.id,a)}}}),s("p",{staticClass:"time f-2-cl"},[t._v(t._s(t.formatTimeFn(e.ctime)))])]),s("c-button",{attrs:{type:"text",marginTop:"5px",className:"delete-btn"},on:{click:function(s){return t.deleteMsg(e.id,a)}}},[t._v("\n              "+t._s(t.$t("message.delete"))+"\n            ")])],1)}))],2):s("div",{staticClass:"no-data f-2-cl"},[s("svg",{staticClass:"icon icon-50",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-g_2"}})]),s("p",[t._v("\n            "+t._s(t.$t("common.notData"))+"\n          ")])]),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isshowLoading,expression:"isshowLoading"}],staticClass:"loading"},[s("c-loading",{attrs:{size:"50"}})],1)]),t.pagination.count/t.pagination.pageSize>1?s("c-pagination",{attrs:{total:t.pagination.count,classes:"c-3-bg","current-page":t.pagination.page,display:t.pagination.pageSize},on:{pagechange:t.pagechange}}):t._e()],1)])])])},i=[],n=(s("57e7"),s("01c8")),l=(s("6b54"),s("87b3"),s("ac6a"),s("f3e2"),s("95d5")),c={name:"mesage",data:function(){return{messageType:0,sideList:[],notieContent:[],pagination:{count:0,page:1,pageSize:10},selectArr:[],deleteFlag:null,readFlag:null,pageNumber:null,isshowLoading:!0,pageTitle:null}},computed:{title:function(){return this.pageTitle?this.pageTitle:this.sideList.length?this.sideList[0].title:""},dataListId:function(){if(this.notieContent.length){var t=[];return this.notieContent.forEach((function(e){t.push(e.id)})),t}return[]}},methods:{init:function(){this.getListData()},formatTimeFn:function(t){return Object(l["k"])(t)},getListData:function(){var t=this;this.isshowLoading=!0,this.getData({url:this.$store.state.url.mesage.message,params:{page:this.pagination.page,pageSize:this.pagination.pageSize,messageType:this.messageType},callback:function(e){t.notieContent=e.data.userMessageList,t.sideList=e.data.typeList,t.pagination.count=e.data.count,t.isshowLoading=!1}})},getData:function(t){var e=this,s=t.url,a=t.params,i=t.callback;this.axios({url:s,params:a,method:"post"}).then((function(t){"0"===t.code?i(t):(e.deleteFlag=null,e.readFlag=null,e.$bus.$emit("tip",{text:t.msg,type:"error"}))})).catch((function(){e.deleteFlag=null,e.readFlag=null,e.$bus.$emit("tip",{text:e.$t("common.error_500"),type:"error"})}))},onChangeRead:function(t,e){var s=this;return("all"===e||2!==this.notieContent[e].status)&&(this.readFlag!==t&&(this.readFlag=t,this.getData({url:this.$store.state.url.mesage.message_status,params:{id:t},callback:function(){"all"===e?s.notieContent.forEach((function(t,e){s.notieContent[e].status=2})):s.notieContent[e].status=2,s.$store.dispatch("getMessage_count")}})),!0)},deleteMsg:function(t,e){var s=this;"all"!==e||t.length?this.deleteFlag!==t&&(this.deleteFlag=t,this.getData({url:this.$store.state.url.mesage.message_del,params:{ids:t.toString()},callback:function(){s.selectArr=[],s.notieContent.splice(e,1),s.$store.dispatch("getMessage_count"),s.getListData()}})):this.$bus.$emit("tip",{text:this.$t("message.pleSelContent"),type:"error"})},switchType:function(t,e){this.pageTitle=e,this.messageType=t,this.pagination.page=1,this.getListData()},pagechange:function(t){this.pageNumber=t,this.pagination.page=t,this.getListData()},checkoutSelect:function(t){if("all"===t)if(this.selectArr.length===this.dataListId.length)this.selectArr=[];else{var e=Object(n["a"])(this.dataListId),s=e.slice(0);this.selectArr=s}else{var a=this.selectArr.indexOf(t);-1!==a?this.selectArr.splice(a,1):this.selectArr.push(t)}}}},o=(s("7fce"),{mixins:[c],mounted:function(){this.init()}}),r=o,g=s("2877"),u=Object(g["a"])(r,a,i,!1,null,null,null);e["default"]=u.exports}}]);